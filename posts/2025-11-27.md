---
title: "HTML・CSS・JSで一から作るTODOアプリ実装チュートリアル"
date: "2025-11-27"
excerpt: " 分かりやすく解説"
coverImage: "/assets/blog/hello-world/cover.jpg"
tags: ["JavaScript", "HTML", "CSS", "チュートリアル"]
---

シンプルで実用的な TODO アプリを、**HTML / CSS / JavaScript（Vanilla）**で一から作ります。学習ポイントは次の通りです：

- DOM 操作の基本（要素作成・イベント委譲）
- データの状態管理（配列で扱う）
- 永続化（`localStorage`）
- 編集・削除・完了・フィルタ機能
- レスポンシブでアクセシブルな UI

完成イメージは、入力 → 追加 → 一覧表示 → 完了・編集・削除ができ、ページをリロードしてもデータが残る TODO アプリです。では実装に入ります。

---

## ファイル構成（完成イメージ）

```
todo/
├─ index.html
├─ styles.css
└─ script.js
```

---

## 完全なコード（コピペで動きます）

### `index.html`

```html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>シンプルTODOアプリ</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="container">
      <h1 class="title">TODO</h1>

      <form id="todo-form" class="form" aria-label="Add todo">
        <input
          id="todo-input"
          class="input"
          type="text"
          placeholder="やることを入力..."
          aria-label="Todo text"
          required
        />
        <button type="submit" class="btn">追加</button>
      </form>

      <div class="controls">
        <div class="filters" role="tablist" aria-label="Filters">
          <button class="filter active" data-filter="all" role="tab">
            すべて
          </button>
          <button class="filter" data-filter="active" role="tab">未完了</button>
          <button class="filter" data-filter="completed" role="tab">
            完了
          </button>
        </div>
        <button id="clear-completed" class="btn small">
          完了をまとめて削除
        </button>
      </div>

      <ul id="todo-list" class="todo-list" aria-live="polite"></ul>

      <footer class="footer">
        <span id="count" class="count">0 件</span>
        <span class="hint">（ローカル保存: このブラウザのみ）</span>
      </footer>
    </main>

    <script src="script.js" type="module"></script>
  </body>
</html>
```

### `styles.css`

```css
:root {
  --bg: #f7f8fb;
  --card: #ffffff;
  --accent: #4f46e5;
  --muted: #6b7280;
  --success: #10b981;
  --danger: #ef4444;
  --shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
  --radius: 12px;
  --max-width: 720px;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Helvetica Neue",
    "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic",
    "Meiryo", sans-serif;
}

* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  margin: 0;
  background: linear-gradient(180deg, #eef2ff 0%, var(--bg) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 32px;
  color: #111827;
}

.container {
  width: 100%;
  max-width: var(--max-width);
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 24px;
}

.title {
  margin: 0 0 12px 0;
  font-size: 28px;
  letter-spacing: -0.02em;
}

.form {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.input {
  flex: 1;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid #e6e9f2;
  font-size: 16px;
  outline: none;
}

.input:focus {
  box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.08);
  border-color: var(--accent);
}

.btn {
  background: var(--accent);
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}

.btn.small {
  padding: 8px 10px;
  font-size: 13px;
  background: #111827;
  color: white;
  border-radius: 8px;
}

.controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.filters {
  display: flex;
  gap: 6px;
}
.filter {
  border: none;
  background: transparent;
  padding: 6px 10px;
  cursor: pointer;
  border-radius: 8px;
  color: var(--muted);
}
.filter.active {
  background: rgba(79, 70, 229, 0.1);
  color: var(--accent);
  font-weight: 600;
}

.todo-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.todo-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #f1f5f9;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.6),
    rgba(255, 255, 255, 0.4)
  );
}

.todo-item.completed {
  opacity: 0.7;
  text-decoration: line-through;
}

.checkbox {
  width: 20px;
  height: 20px;
  border-radius: 6px;
  border: 1px solid #d1d5db;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.checkbox.checked {
  background: var(--success);
  border-color: var(--success);
  color: white;
  font-weight: 700;
}

.todo-text {
  flex: 1;
  font-size: 15px;
  word-break: break-word;
}

.actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.icon-btn {
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
  font-size: 14px;
}

.edit-input {
  width: 100%;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #e6e9f2;
}

.footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 14px;
  color: var(--muted);
  font-size: 13px;
}

/* レスポンシブ */
@media (max-width: 520px) {
  .form {
    flex-direction: column;
  }
  .btn {
    width: 100%;
  }
  .controls {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
}
```

### `script.js`

```javascript
// script.js (ES module)
const STORAGE_KEY = "todos-v1";

const $form = document.getElementById("todo-form");
const $input = document.getElementById("todo-input");
const $list = document.getElementById("todo-list");
const $count = document.getElementById("count");
const $filters = document.querySelectorAll(".filter");
const $clearCompleted = document.getElementById("clear-completed");

let todos = loadTodos();
let filter = "all"; // all | active | completed

render();

/* ---------- イベント設定 ---------- */

// 追加
$form.addEventListener("submit", (e) => {
  e.preventDefault();
  const text = $input.value.trim();
  if (!text) return;
  addTodo(text);
  $input.value = "";
  $input.focus();
});

// クリックイベントを一つの場所で処理（イベント委譲）
$list.addEventListener("click", (e) => {
  const item = e.target.closest(".todo-item");
  if (!item) return;
  const id = item.dataset.id;

  // 完了ボックス
  if (e.target.matches(".checkbox") || e.target.closest(".checkbox")) {
    toggleComplete(id);
    return;
  }

  // 削除
  if (e.target.matches(".btn-delete") || e.target.closest(".btn-delete")) {
    removeTodo(id);
    return;
  }

  // 編集ボタン
  if (e.target.matches(".btn-edit") || e.target.closest(".btn-edit")) {
    startEdit(id);
    return;
  }

  // 保存（編集中の保存ボタン）
  if (e.target.matches(".btn-save") || e.target.closest(".btn-save")) {
    const input = item.querySelector(".edit-input");
    finishEdit(id, input.value);
    return;
  }

  // キャンセル（編集中）
  if (e.target.matches(".btn-cancel") || e.target.closest(".btn-cancel")) {
    cancelEdit(id);
    return;
  }
});

// フィルタ
$filters.forEach((btn) => {
  btn.addEventListener("click", () => {
    $filters.forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");
    filter = btn.dataset.filter;
    render();
  });
});

// 完了まとめて削除
$clearCompleted.addEventListener("click", () => {
  todos = todos.filter((t) => !t.completed);
  saveTodos();
  render();
});

/* ---------- データ操作関数 ---------- */

function loadTodos() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
  } catch (err) {
    console.error("loadTodos error", err);
    return [];
  }
}

function saveTodos() {
  try {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
  } catch (err) {
    console.error("saveTodos error", err);
  }
}

function addTodo(text) {
  const item = {
    id: cryptoRandomId(),
    text,
    completed: false,
    editing: false,
    createdAt: Date.now(),
  };
  todos.unshift(item); // 新しい順
  saveTodos();
  render();
}

function removeTodo(id) {
  todos = todos.filter((t) => t.id !== id);
  saveTodos();
  render();
}

function toggleComplete(id) {
  todos = todos.map((t) =>
    t.id === id ? { ...t, completed: !t.completed } : t
  );
  saveTodos();
  render();
}

function startEdit(id) {
  todos = todos.map((t) =>
    t.id === id ? { ...t, editing: true } : { ...t, editing: false }
  );
  render();
  const itemEl = document.querySelector(`.todo-item[data-id="${id}"]`);
  if (itemEl) {
    const input = itemEl.querySelector(".edit-input");
    if (input) {
      input.focus();
      // カーソルを末尾に
      input.setSelectionRange(input.value.length, input.value.length);
    }
  }
}

function finishEdit(id, newText) {
  const text = (newText || "").trim();
  if (!text) {
    // 空にしたら削除
    removeTodo(id);
    return;
  }
  todos = todos.map((t) => (t.id === id ? { ...t, text, editing: false } : t));
  saveTodos();
  render();
}

function cancelEdit(id) {
  todos = todos.map((t) => (t.id === id ? { ...t, editing: false } : t));
  render();
}

/* ---------- レンダリング ---------- */

function render() {
  // 表示対象
  const visible = todos.filter((t) => {
    if (filter === "active") return !t.completed;
    if (filter === "completed") return t.completed;
    return true;
  });

  // DOMクリア
  $list.innerHTML = "";

  // アイテム生成
  visible.forEach((t) => {
    const li = document.createElement("li");
    li.className =
      "todo-item" +
      (t.completed ? " completed" : "") +
      (t.editing ? " editing" : "");
    li.dataset.id = t.id;
    li.setAttribute("role", "listitem");

    if (t.editing) {
      li.innerHTML = `
        <input class="edit-input" type="text" value="${escapeHtml(
          t.text
        )}" aria-label="Edit todo" />
        <div class="actions">
          <button class="icon-btn btn-save" title="保存">保存</button>
          <button class="icon-btn btn-cancel" title="キャンセル">キャンセル</button>
        </div>
      `;
    } else {
      li.innerHTML = `
        <button class="checkbox ${
          t.completed ? "checked" : ""
        }" aria-label="完了切替" title="完了切替">
          ${t.completed ? "✓" : ""}
        </button>
        <div class="todo-text">${escapeHtml(t.text)}</div>
        <div class="actions">
          <button class="icon-btn btn-edit" title="編集">編集</button>
          <button class="icon-btn btn-delete" title="削除">削除</button>
        </div>
      `;
    }

    $list.appendChild(li);
  });

  // 件数表示
  const remaining = todos.filter((t) => !t.completed).length;
  $count.textContent = `${remaining} 件 / 全 ${todos.length} 件`;
}

/* ---------- ヘルパー ---------- */

function escapeHtml(str = "") {
  return String(str)
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#039;");
}

// 簡易ランダムID（衝突は稀）
function cryptoRandomId() {
  // ブラウザがCrypto APIを持っている想定
  const arr = new Uint32Array(4);
  crypto.getRandomValues(arr);
  return Array.from(arr, (n) => n.toString(16)).join("-");
}

/* ---------- キーボード支援（編集エンターで保存、Escでキャンセル） ---------- */
$list.addEventListener("keydown", (e) => {
  const item = e.target.closest(".todo-item");
  if (!item) return;
  const id = item.dataset.id;
  if (e.target.matches(".edit-input")) {
    if (e.key === "Enter") {
      finishEdit(id, e.target.value);
    } else if (e.key === "Escape") {
      cancelEdit(id);
    }
  }
});
```

---

## 実装ポイントの解説（短く）

1. **データモデル**：`todos` を配列で保持。各要素は `{ id, text, completed, editing, createdAt }`。配列を更新したら `saveTodos()` を呼んで `localStorage` に保存します。
2. **レンダリング**：`render()` が `todos` の現在状態を DOM に反映。編集モード・完了表示などをここで切替。
3. **イベント委譲**：リスト全体に一つだけクリックリスナーを置き、`closest` でターゲットを特定。パフォーマンスと管理が楽になります。
4. **永続化**：`localStorage` に JSON で保存。キーを変えればバージョン管理も可能（例: `todos-v2`）。
5. **編集 UI**：入力欄を編集モードに差し替え、Enter で保存、Esc でキャンセル。空で保存すると削除します（UX 上の判断）。
6. **アクセシビリティ**：`aria` 属性、ボタンの `title`、`role` などを最低限追加。キーボード操作（Enter/Esc）に対応。

---

## 追加で取り組める拡張案（学習・実務での次ステップ）

- サーバーに保存して複数デバイスで同期（REST / GraphQL + DB）。
- ユーザー認証を入れてユーザーごとに TODO を分離。
- タグ付けや期限、優先度の実装。
- ドラッグ＆ドロップで並べ替え（`SortableJS` 等）。
- テストの追加（ユニットテスト・E2E テスト）。

---

## まとめ

このチュートリアルでは**最小限の依存で動く実用的な TODO アプリ**を作りました。小さな機能を 1 つずつ実装・分離していくことで、DOM 操作・状態管理・永続化の基礎が身につきます。まずはこのコードを動かして、上の拡張案を一つずつ試してみてください — 学んだことが実際のスキルになります。
